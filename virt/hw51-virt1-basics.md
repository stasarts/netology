# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

### Ответ:

Основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС в степени изоляции гостевой ВМ.
* при полной виртуализации немодифицированная ОС работает полностью изолированно и не осведомлена о виртуализации.
* при паравиртуализации виртуальная машина не изолирует ОС полностью, а модифицирует ее, чтобы сделать ее совместимой с определенными API.
* при виртуализации на уровне ОС все задачи выполняются с помощью возможностей виртуализации, предоставляемых операционной системой физического сервера, гостевая ОС не имеет собственного ядра, использует ядро хоста.

## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

Организация серверов:
- физические сервера,
- паравиртуализация,
- виртуализация уровня ОС.

Условия использования:
- Высоконагруженная база данных, чувствительная к отказу.
- Различные web-приложения.
- Windows системы для использования бухгалтерским отделом.
- Системы, выполняющие высокопроизводительные расчеты на GPU.

Опишите, почему вы выбрали к каждому целевому использованию такую организацию.

### Ответ:

1) Высоконагруженная база данных, чувствительная к отказу - физические сервера.  
Для высоконагруженных систем важна "близость"/"максимальный доступ" к ресурсам физического сервера.
2) Различные web-приложения - виртуализация уровня ОС.  
Позволяет быстро масштабировать инфраструктуру. Приложение упаковано в контейнер, требуется меньше времени для сворачивания/разворачивания необходимого количества серверов.
3) Windows системы для использования бухгалтерским отделом - паравиртуализация.  
Такие системы не требовательны к ресурсам. Виртуализация позволит облегчить создание бекапов, создание новых машин для новых сотрудников. Паравиртуализация позволит проще управлять машинами из родительской ОС. Лучшим решением для Windows-машин будет Hyper-V.
4) Системы, выполняющие высокопроизводительные расчеты на GPU - физические сервера.  
При высокопроизводительных расчетах требуется максимальный доступ к ресурсам физической машины.

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

Сценарии:

1. 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
2. Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
3. Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
4. Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.

### Ответ:

1) Если система преимущественно Windows based - лучшим решением является Hyper-V или vSphere. Обе имеют программных балансировщиков нагрузки, репликацию данных и автоматизированный механизм создания резервных копий.
2) KVM будет наиболее производительным open source решением для систем на базе Linux, также поддерживает Windows.
3) Hyper-V Server (Microsoft), бесплатен.
4) Для разворачивания окружений для тестирования лучше всего подходят контейнеры. Быстрая и несложная конфигурация/разворачивание хостов средствами IaaC.

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.  

### Ответ:

Возможные проблемы и недостатки гетерогенной системы:
- Если расположена на одном физическом сервере - снижение производительности. Как правило, разные решения виртуализации больше заточены под конкретного вендора Intel/AMD.
- Если расположены на разных физических серверах - усложнение организации инфраструктуры физических серверов.
- Повышение стоимости обслуживания. Для поддержки разных систем требуется более квалифицированные инженеры, либо большее количество узкоспециализированных.
- Усложняется мониторинг ресурсов - разные системы требуют разных решений мониторинга.

Решения для минимизации рисков и проблем (если все же среда гетерогенная):
- Расположение разных гипервизоров на разных физических серверах (подходящего вендора).
- Обеспечение поддержки среды необходимым количеством квалифицированных инженеров.

Если бы у меня был выбор, я бы старался не создавать гетерогенную среду для того, чтобы избежать вышеописанных проблем. Как правило такого выбора нет (зависит от масштаба и возраста инфраструктуры).
Например при слиянии двух компаний/отделов (использовались разные системы виртуализации), возникает ситуация, когда требуется поддерживать действующие решения.